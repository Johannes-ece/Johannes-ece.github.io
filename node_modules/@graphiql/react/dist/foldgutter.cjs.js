"use strict";var P=Object.defineProperty;var u=(O,y)=>P(O,"name",{value:y,configurable:!0});var T=require("./codemirror.cjs.js");function j(O,y){return y.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(s){if(s!=="default"&&!(s in O)){var F=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(O,s,F.get?F:{enumerable:!0,get:function(){return i[s]}})}})}),Object.freeze(Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}))}u(j,"_mergeNamespaces");var U={exports:{}},A={exports:{}};(function(O,y){(function(i){i(T.codemirror$1.exports)})(function(i){function s(e,o,f,a){if(f&&f.call){var c=f;f=null}else var c=p(e,f,"rangeFinder");typeof o=="number"&&(o=i.Pos(o,0));var w=p(e,f,"minFoldSize");function x(l){var r=c(e,o);if(!r||r.to.line-r.from.line<w)return null;if(a==="fold")return r;for(var g=e.findMarksAt(r.from),v=0;v<g.length;++v)if(g[v].__isFold){if(!l)return null;r.cleared=!0,g[v].clear()}return r}u(x,"getRange");var d=x(!0);if(p(e,f,"scanUp"))for(;!d&&o.line>e.firstLine();)o=i.Pos(o.line-1,0),d=x(!1);if(!(!d||d.cleared||a==="unfold")){var t=F(e,f,d);i.on(t,"mousedown",function(l){n.clear(),i.e_preventDefault(l)});var n=e.markText(d.from,d.to,{replacedWith:t,clearOnEnter:p(e,f,"clearOnEnter"),__isFold:!0});n.on("clear",function(l,r){i.signal(e,"unfold",e,l,r)}),i.signal(e,"fold",e,d.from,d.to)}}u(s,"doFold");function F(e,o,f){var a=p(e,o,"widget");if(typeof a=="function"&&(a=a(f.from,f.to)),typeof a=="string"){var c=document.createTextNode(a);a=document.createElement("span"),a.appendChild(c),a.className="CodeMirror-foldmarker"}else a&&(a=a.cloneNode(!0));return a}u(F,"makeWidget"),i.newFoldFunction=function(e,o){return function(f,a){s(f,a,{rangeFinder:e,widget:o})}},i.defineExtension("foldCode",function(e,o,f){s(this,e,o,f)}),i.defineExtension("isFolded",function(e){for(var o=this.findMarksAt(e),f=0;f<o.length;++f)if(o[f].__isFold)return!0}),i.commands.toggleFold=function(e){e.foldCode(e.getCursor())},i.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},i.commands.unfold=function(e){e.foldCode(e.getCursor(),{scanUp:!1},"unfold")},i.commands.foldAll=function(e){e.operation(function(){for(var o=e.firstLine(),f=e.lastLine();o<=f;o++)e.foldCode(i.Pos(o,0),{scanUp:!1},"fold")})},i.commands.unfoldAll=function(e){e.operation(function(){for(var o=e.firstLine(),f=e.lastLine();o<=f;o++)e.foldCode(i.Pos(o,0),{scanUp:!1},"unfold")})},i.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(o,f){for(var a=0;a<e.length;++a){var c=e[a](o,f);if(c)return c}}}),i.registerHelper("fold","auto",function(e,o){for(var f=e.getHelpers(o,"fold"),a=0;a<f.length;a++){var c=f[a](e,o);if(c)return c}});var m={rangeFinder:i.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1,clearOnEnter:!0};i.defineOption("foldOptions",null);function p(e,o,f){if(o&&o[f]!==void 0)return o[f];var a=e.options.foldOptions;return a&&a[f]!==void 0?a[f]:m[f]}u(p,"getOption"),i.defineExtension("foldOption",function(e,o){return p(this,e,o)})})})();(function(O,y){(function(i){i(T.codemirror$1.exports,A.exports)})(function(i){i.defineOption("foldGutter",!1,function(t,n,l){l&&l!=i.Init&&(t.clearGutter(t.state.foldGutter.options.gutter),t.state.foldGutter=null,t.off("gutterClick",c),t.off("changes",w),t.off("viewportChange",x),t.off("fold",d),t.off("unfold",d),t.off("swapDoc",w)),n&&(t.state.foldGutter=new F(m(n)),a(t),t.on("gutterClick",c),t.on("changes",w),t.on("viewportChange",x),t.on("fold",d),t.on("unfold",d),t.on("swapDoc",w))});var s=i.Pos;function F(t){this.options=t,this.from=this.to=0}u(F,"State");function m(t){return t===!0&&(t={}),t.gutter==null&&(t.gutter="CodeMirror-foldgutter"),t.indicatorOpen==null&&(t.indicatorOpen="CodeMirror-foldgutter-open"),t.indicatorFolded==null&&(t.indicatorFolded="CodeMirror-foldgutter-folded"),t}u(m,"parseOptions");function p(t,n){for(var l=t.findMarks(s(n,0),s(n+1,0)),r=0;r<l.length;++r)if(l[r].__isFold){var g=l[r].find(-1);if(g&&g.line===n)return l[r]}}u(p,"isFolded");function e(t){if(typeof t=="string"){var n=document.createElement("div");return n.className=t+" CodeMirror-guttermarker-subtle",n}else return t.cloneNode(!0)}u(e,"marker");function o(t,n,l){var r=t.state.foldGutter.options,g=n-1,v=t.foldOption(r,"minFoldSize"),G=t.foldOption(r,"rangeFinder"),E=typeof r.indicatorFolded=="string"&&f(r.indicatorFolded),b=typeof r.indicatorOpen=="string"&&f(r.indicatorOpen);t.eachLine(n,l,function(S){++g;var k=null,h=S.gutterMarkers;if(h&&(h=h[r.gutter]),p(t,g)){if(E&&h&&E.test(h.className))return;k=e(r.indicatorFolded)}else{var N=s(g,0),_=G&&G(t,N);if(_&&_.to.line-_.from.line>=v){if(b&&h&&b.test(h.className))return;k=e(r.indicatorOpen)}}!k&&!h||t.setGutterMarker(S,r.gutter,k)})}u(o,"updateFoldInfo");function f(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}u(f,"classTest");function a(t){var n=t.getViewport(),l=t.state.foldGutter;!l||(t.operation(function(){o(t,n.from,n.to)}),l.from=n.from,l.to=n.to)}u(a,"updateInViewport");function c(t,n,l){var r=t.state.foldGutter;if(!!r){var g=r.options;if(l==g.gutter){var v=p(t,n);v?v.clear():t.foldCode(s(n,0),g)}}}u(c,"onGutterClick");function w(t){var n=t.state.foldGutter;if(!!n){var l=n.options;n.from=n.to=0,clearTimeout(n.changeUpdate),n.changeUpdate=setTimeout(function(){a(t)},l.foldOnChangeTimeSpan||600)}}u(w,"onChange");function x(t){var n=t.state.foldGutter;if(!!n){var l=n.options;clearTimeout(n.changeUpdate),n.changeUpdate=setTimeout(function(){var r=t.getViewport();n.from==n.to||r.from-n.to>20||n.from-r.to>20?a(t):t.operation(function(){r.from<n.from&&(o(t,r.from,n.from),n.from=r.from),r.to>n.to&&(o(t,n.to,r.to),n.to=r.to)})},l.updateViewportTimeSpan||400)}}u(x,"onViewportChange");function d(t,n){var l=t.state.foldGutter;if(!!l){var r=n.line;r>=l.from&&r<l.to&&o(t,r,r+1)}}u(d,"onFold")})})();var z=U.exports,L=j({__proto__:null,default:z},[U.exports]);exports.foldgutter=L;
//# sourceMappingURL=foldgutter.cjs.js.map
