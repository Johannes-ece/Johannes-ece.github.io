"use strict";var T=Object.defineProperty;var g=(k,x)=>T(k,"name",{value:x,configurable:!0});var O=require("./codemirror.cjs.js");function _(k,x){return x.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(v){if(v!=="default"&&!(v in k)){var o=Object.getOwnPropertyDescriptor(i,v);Object.defineProperty(k,v,o.get?o:{enumerable:!0,get:function(){return i[v]}})}})}),Object.freeze(Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}))}g(_,"_mergeNamespaces");var L={exports:{}};(function(k,x){(function(i){i(O.codemirror$1.exports)})(function(i){var v=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),o=i.Pos,B={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function A(t){return t&&t.bracketRegex||/[(){}[\]]/}g(A,"bracketRegex");function H(t,r,e){var u=t.getLineHandle(r.line),n=r.ch-1,l=e&&e.afterCursor;l==null&&(l=/(^| )cm-fat-cursor($| )/.test(t.getWrapperElement().className));var h=A(e),c=!l&&n>=0&&h.test(u.text.charAt(n))&&B[u.text.charAt(n)]||h.test(u.text.charAt(n+1))&&B[u.text.charAt(++n)];if(!c)return null;var a=c.charAt(1)==">"?1:-1;if(e&&e.strict&&a>0!=(n==r.ch))return null;var p=t.getTokenTypeAt(o(r.line,n+1)),s=j(t,o(r.line,n+(a>0?1:0)),a,p,e);return s==null?null:{from:o(r.line,n),to:s&&s.pos,match:s&&s.ch==c.charAt(0),forward:a>0}}g(H,"findMatchingBracket");function j(t,r,e,u,n){for(var l=n&&n.maxScanLineLength||1e4,h=n&&n.maxScanLines||1e3,c=[],a=A(n),p=e>0?Math.min(r.line+h,t.lastLine()+1):Math.max(t.firstLine()-1,r.line-h),s=r.line;s!=p;s+=e){var f=t.getLine(s);if(!!f){var d=e>0?0:f.length-1,S=e>0?f.length:-1;if(!(f.length>l))for(s==r.line&&(d=r.ch-(e<0?1:0));d!=S;d+=e){var b=f.charAt(d);if(a.test(b)&&(u===void 0||(t.getTokenTypeAt(o(s,d+1))||"")==(u||""))){var M=B[b];if(M&&M.charAt(1)==">"==e>0)c.push(b);else if(c.length)c.pop();else return{pos:o(s,d),ch:b}}}}}return s-e==(e>0?t.lastLine():t.firstLine())?!1:null}g(j,"scanForBracket");function E(t,r,e){for(var u=t.state.matchBrackets.maxHighlightLineLength||1e3,n=e&&e.highlightNonMatching,l=[],h=t.listSelections(),c=0;c<h.length;c++){var a=h[c].empty()&&H(t,h[c].head,e);if(a&&(a.match||n!==!1)&&t.getLine(a.from.line).length<=u){var p=a.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";l.push(t.markText(a.from,o(a.from.line,a.from.ch+1),{className:p})),a.to&&t.getLine(a.to.line).length<=u&&l.push(t.markText(a.to,o(a.to.line,a.to.ch+1),{className:p}))}}if(l.length){v&&t.state.focused&&t.focus();var s=g(function(){t.operation(function(){for(var f=0;f<l.length;f++)l[f].clear()})},"clear");if(r)setTimeout(s,800);else return s}}g(E,"matchBrackets");function y(t){t.operation(function(){t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null),t.state.matchBrackets.currentlyHighlighted=E(t,!1,t.state.matchBrackets)})}g(y,"doMatchBrackets");function m(t){t.state.matchBrackets&&t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null)}g(m,"clearHighlighted"),i.defineOption("matchBrackets",!1,function(t,r,e){e&&e!=i.Init&&(t.off("cursorActivity",y),t.off("focus",y),t.off("blur",m),m(t)),r&&(t.state.matchBrackets=typeof r=="object"?r:{},t.on("cursorActivity",y),t.on("focus",y),t.on("blur",m))}),i.defineExtension("matchBrackets",function(){E(this,!0)}),i.defineExtension("findMatchingBracket",function(t,r,e){return(e||typeof r=="boolean")&&(e?(e.strict=r,r=e):r=r?{strict:!0}:null),H(this,t,r)}),i.defineExtension("scanForBracket",function(t,r,e,u){return j(this,t,r,e,u)})})})();var P=L.exports,$=_({__proto__:null,default:P},[L.exports]);exports.matchbrackets=$;exports.matchbrackets$1=L;
//# sourceMappingURL=matchbrackets.cjs.js.map
