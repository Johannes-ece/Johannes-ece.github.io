"use strict";var V=Object.defineProperty;var t=(e,r)=>V(e,"name",{value:r,configurable:!0});var I=require("./codemirror.cjs.js"),b=require("graphql");require("./index.cjs.js");require("react");require("react-dom");function v(e){d=e,w=e.length,a=o=N=-1,c(),x();const r=L();return h("EOF"),r}t(v,"jsonParse");let d,w,a,o,N,n,l;function L(){const e=a,r=[];if(h("{"),!j("}")){do r.push(C());while(j(","));h("}")}return{kind:"Object",start:e,end:N,members:r}}t(L,"parseObj");function C(){const e=a,r=l==="String"?G():null;h("String"),h(":");const i=B();return{kind:"Member",start:e,end:N,key:r,value:i}}t(C,"parseMember");function M(){const e=a,r=[];if(h("["),!j("]")){do r.push(B());while(j(","));h("]")}return{kind:"Array",start:e,end:N,values:r}}t(M,"parseArr");function B(){switch(l){case"[":return M();case"{":return L();case"String":case"Number":case"Boolean":case"Null":const e=G();return x(),e}h("Value")}t(B,"parseVal");function G(){return{kind:l,start:a,end:o,value:JSON.parse(d.slice(a,o))}}t(G,"curToken");function h(e){if(l===e){x();return}let r;if(l==="EOF")r="[end of file]";else if(o-a>1)r="`"+d.slice(a,o)+"`";else{const i=d.slice(a).match(/^.+?\b/);r="`"+(i?i[0]:d[a])+"`"}throw g(`Expected ${e} but found ${r}.`)}t(h,"expect");class q extends Error{constructor(r,i){super(r),this.position=i}}t(q,"JSONSyntaxError");function g(e){return new q(e,{start:a,end:o})}t(g,"syntaxError");function j(e){if(l===e)return x(),!0}t(j,"skip");function c(){return o<w&&(o++,n=o===w?0:d.charCodeAt(o)),n}t(c,"ch");function x(){for(N=o;n===9||n===10||n===13||n===32;)c();if(n===0){l="EOF";return}switch(a=o,n){case 34:return l="String",D();case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return l="Number",H();case 102:if(d.slice(a,a+5)!=="false")break;o+=4,c(),l="Boolean";return;case 110:if(d.slice(a,a+4)!=="null")break;o+=3,c(),l="Null";return;case 116:if(d.slice(a,a+4)!=="true")break;o+=3,c(),l="Boolean";return}l=d[a],c()}t(x,"lex");function D(){for(c();n!==34&&n>31;)if(n===92)switch(n=c(),n){case 34:case 47:case 92:case 98:case 102:case 110:case 114:case 116:c();break;case 117:c(),E(),E(),E(),E();break;default:throw g("Bad character escape sequence.")}else{if(o===w)throw g("Unterminated string.");c()}if(n===34){c();return}throw g("Unterminated string.")}t(D,"readString");function E(){if(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102)return c();throw g("Expected hexadecimal digit.")}t(E,"readHex");function H(){n===45&&c(),n===48?c():O(),n===46&&(c(),O()),(n===69||n===101)&&(n=c(),(n===43||n===45)&&c(),O())}t(H,"readNumber");function O(){if(n<48||n>57)throw g("Expected decimal digit.");do c();while(n>=48&&n<=57)}t(O,"readDigits");I.CodeMirror.registerHelper("lint","graphql-variables",(e,r,i)=>{if(!e)return[];let f;try{f=v(e)}catch(u){if(u instanceof q)return[$(i,u.position,u.message)];throw u}const{variableToType:s}=r;return s?U(i,s,f):[]});function U(e,r,i){const f=[];return i.members.forEach(s=>{var u;if(s){const p=(u=s.key)===null||u===void 0?void 0:u.value,k=r[p];k?m(k,s.value).forEach(([y,Q])=>{f.push($(e,y,Q))}):f.push($(e,s.key,`Variable "$${p}" does not appear in any GraphQL query.`))}}),f}t(U,"validateVariables");function m(e,r){if(!e||!r)return[];if(e instanceof b.GraphQLNonNull)return r.kind==="Null"?[[r,`Type "${e}" is non-nullable and cannot be null.`]]:m(e.ofType,r);if(r.kind==="Null")return[];if(e instanceof b.GraphQLList){const i=e.ofType;if(r.kind==="Array"){const f=r.values||[];return F(f,s=>m(i,s))}return m(i,r)}if(e instanceof b.GraphQLInputObjectType){if(r.kind!=="Object")return[[r,`Type "${e}" must be an Object.`]];const i=Object.create(null),f=F(r.members,s=>{var u;const p=(u=s==null?void 0:s.key)===null||u===void 0?void 0:u.value;i[p]=!0;const k=e.getFields()[p];if(!k)return[[s.key,`Type "${e}" does not have a field "${p}".`]];const y=k?k.type:void 0;return m(y,s.value)});return Object.keys(e.getFields()).forEach(s=>{const u=e.getFields()[s];!i[s]&&u.type instanceof b.GraphQLNonNull&&!u.defaultValue&&f.push([r,`Object of type "${e}" is missing required field "${s}".`])}),f}return e.name==="Boolean"&&r.kind!=="Boolean"||e.name==="String"&&r.kind!=="String"||e.name==="ID"&&r.kind!=="Number"&&r.kind!=="String"||e.name==="Float"&&r.kind!=="Number"||e.name==="Int"&&(r.kind!=="Number"||(r.value|0)!==r.value)?[[r,`Expected value of type "${e}".`]]:(e instanceof b.GraphQLEnumType||e instanceof b.GraphQLScalarType)&&(r.kind!=="String"&&r.kind!=="Number"&&r.kind!=="Boolean"&&r.kind!=="Null"||_(e.parseValue(r.value)))?[[r,`Expected value of type "${e}".`]]:[]}t(m,"validateValue");function $(e,r,i){return{message:i,severity:"error",type:"validation",from:e.posFromIndex(r.start),to:e.posFromIndex(r.end)}}t($,"lintError");function _(e){return e==null||e!==e}t(_,"isNullish");function F(e,r){return Array.prototype.concat.apply([],e.map(r))}t(F,"mapCat");
//# sourceMappingURL=lint.cjs2.js.map
