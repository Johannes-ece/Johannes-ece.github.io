{"version":3,"file":"info.cjs.js","sources":["../../codemirror-graphql/esm/info.js"],"sourcesContent":["import { GraphQLList, GraphQLNonNull, } from 'graphql';\nimport CodeMirror from 'codemirror';\nimport getTypeInfo from './utils/getTypeInfo';\nimport { getArgumentReference, getDirectiveReference, getEnumValueReference, getFieldReference, getTypeReference, } from './utils/SchemaReference';\nimport './utils/info-addon';\nCodeMirror.registerHelper('info', 'graphql', (token, options) => {\n    if (!options.schema || !token.state) {\n        return;\n    }\n    const { kind, step } = token.state;\n    const typeInfo = getTypeInfo(options.schema, token.state);\n    if ((kind === 'Field' && step === 0 && typeInfo.fieldDef) ||\n        (kind === 'AliasedField' && step === 2 && typeInfo.fieldDef)) {\n        const header = document.createElement('div');\n        header.className = 'CodeMirror-info-header';\n        renderField(header, typeInfo, options);\n        const into = document.createElement('div');\n        into.appendChild(header);\n        renderDescription(into, options, typeInfo.fieldDef);\n        return into;\n    }\n    if (kind === 'Directive' && step === 1 && typeInfo.directiveDef) {\n        const header = document.createElement('div');\n        header.className = 'CodeMirror-info-header';\n        renderDirective(header, typeInfo, options);\n        const into = document.createElement('div');\n        into.appendChild(header);\n        renderDescription(into, options, typeInfo.directiveDef);\n        return into;\n    }\n    if (kind === 'Argument' && step === 0 && typeInfo.argDef) {\n        const header = document.createElement('div');\n        header.className = 'CodeMirror-info-header';\n        renderArg(header, typeInfo, options);\n        const into = document.createElement('div');\n        into.appendChild(header);\n        renderDescription(into, options, typeInfo.argDef);\n        return into;\n    }\n    if (kind === 'EnumValue' &&\n        typeInfo.enumValue &&\n        typeInfo.enumValue.description) {\n        const header = document.createElement('div');\n        header.className = 'CodeMirror-info-header';\n        renderEnumValue(header, typeInfo, options);\n        const into = document.createElement('div');\n        into.appendChild(header);\n        renderDescription(into, options, typeInfo.enumValue);\n        return into;\n    }\n    if (kind === 'NamedType' &&\n        typeInfo.type &&\n        typeInfo.type.description) {\n        const header = document.createElement('div');\n        header.className = 'CodeMirror-info-header';\n        renderType(header, typeInfo, options, typeInfo.type);\n        const into = document.createElement('div');\n        into.appendChild(header);\n        renderDescription(into, options, typeInfo.type);\n        return into;\n    }\n});\nfunction renderField(into, typeInfo, options) {\n    renderQualifiedField(into, typeInfo, options);\n    renderTypeAnnotation(into, typeInfo, options, typeInfo.type);\n}\nfunction renderQualifiedField(into, typeInfo, options) {\n    var _a;\n    const fieldName = ((_a = typeInfo.fieldDef) === null || _a === void 0 ? void 0 : _a.name) || '';\n    text(into, fieldName, 'field-name', options, getFieldReference(typeInfo));\n}\nfunction renderDirective(into, typeInfo, options) {\n    var _a;\n    const name = '@' + (((_a = typeInfo.directiveDef) === null || _a === void 0 ? void 0 : _a.name) || '');\n    text(into, name, 'directive-name', options, getDirectiveReference(typeInfo));\n}\nfunction renderArg(into, typeInfo, options) {\n    var _a;\n    const name = ((_a = typeInfo.argDef) === null || _a === void 0 ? void 0 : _a.name) || '';\n    text(into, name, 'arg-name', options, getArgumentReference(typeInfo));\n    renderTypeAnnotation(into, typeInfo, options, typeInfo.inputType);\n}\nfunction renderEnumValue(into, typeInfo, options) {\n    var _a;\n    const name = ((_a = typeInfo.enumValue) === null || _a === void 0 ? void 0 : _a.name) || '';\n    renderType(into, typeInfo, options, typeInfo.inputType);\n    text(into, '.');\n    text(into, name, 'enum-value', options, getEnumValueReference(typeInfo));\n}\nfunction renderTypeAnnotation(into, typeInfo, options, t) {\n    const typeSpan = document.createElement('span');\n    typeSpan.className = 'type-name-pill';\n    if (t instanceof GraphQLNonNull) {\n        renderType(typeSpan, typeInfo, options, t.ofType);\n        text(typeSpan, '!');\n    }\n    else if (t instanceof GraphQLList) {\n        text(typeSpan, '[');\n        renderType(typeSpan, typeInfo, options, t.ofType);\n        text(typeSpan, ']');\n    }\n    else {\n        text(typeSpan, (t === null || t === void 0 ? void 0 : t.name) || '', 'type-name', options, getTypeReference(typeInfo, t));\n    }\n    into.appendChild(typeSpan);\n}\nfunction renderType(into, typeInfo, options, t) {\n    if (t instanceof GraphQLNonNull) {\n        renderType(into, typeInfo, options, t.ofType);\n        text(into, '!');\n    }\n    else if (t instanceof GraphQLList) {\n        text(into, '[');\n        renderType(into, typeInfo, options, t.ofType);\n        text(into, ']');\n    }\n    else {\n        text(into, (t === null || t === void 0 ? void 0 : t.name) || '', 'type-name', options, getTypeReference(typeInfo, t));\n    }\n}\nfunction renderDescription(into, options, def) {\n    const { description } = def;\n    if (description) {\n        const descriptionDiv = document.createElement('div');\n        descriptionDiv.className = 'info-description';\n        if (options.renderDescription) {\n            descriptionDiv.innerHTML = options.renderDescription(description);\n        }\n        else {\n            descriptionDiv.appendChild(document.createTextNode(description));\n        }\n        into.appendChild(descriptionDiv);\n    }\n    renderDeprecation(into, options, def);\n}\nfunction renderDeprecation(into, options, def) {\n    const reason = def.deprecationReason;\n    if (reason) {\n        const deprecationDiv = document.createElement('div');\n        deprecationDiv.className = 'info-deprecation';\n        into.appendChild(deprecationDiv);\n        const label = document.createElement('span');\n        label.className = 'info-deprecation-label';\n        label.appendChild(document.createTextNode('Deprecated'));\n        deprecationDiv.appendChild(label);\n        const reasonDiv = document.createElement('div');\n        reasonDiv.className = 'info-deprecation-reason';\n        if (options.renderDescription) {\n            reasonDiv.innerHTML = options.renderDescription(reason);\n        }\n        else {\n            reasonDiv.appendChild(document.createTextNode(reason));\n        }\n        deprecationDiv.appendChild(reasonDiv);\n    }\n}\nfunction text(into, content, className = '', options = { onClick: null }, ref = null) {\n    if (className) {\n        const { onClick } = options;\n        let node;\n        if (onClick) {\n            node = document.createElement('a');\n            node.href = 'javascript:void 0';\n            node.addEventListener('click', (e) => {\n                onClick(ref, e);\n            });\n        }\n        else {\n            node = document.createElement('span');\n        }\n        node.className = className;\n        node.appendChild(document.createTextNode(content));\n        into.appendChild(node);\n    }\n    else {\n        into.appendChild(document.createTextNode(content));\n    }\n}\n//# sourceMappingURL=info.js.map"],"names":["CodeMirror","getTypeInfo","getFieldReference","getDirectiveReference","getArgumentReference","getEnumValueReference","GraphQLNonNull","GraphQLList","getTypeReference"],"mappings":"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"}