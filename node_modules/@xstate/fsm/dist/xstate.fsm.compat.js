var t,n;t=this,n=function(t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var n;(n=t.InterpreterStatus||(t.InterpreterStatus={}))[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped";var e={type:"xstate.init"};function r(t){return void 0===t?[]:[].concat(t)}function i(t,n){return"string"==typeof(t="string"==typeof t&&n&&n[t]?n[t]:t)?{type:t}:"function"==typeof t?{type:t.name,exec:t}:t}function o(t){return function(n){return t===n}}function a(t){return"string"==typeof t?{type:t}:t}function u(t,n){return{value:t,context:n,actions:[],changed:!1,matches:o(t)}}var c=function(t,n){return t.actions.forEach((function(e){var r=e.exec;return r&&r(t.context,n)}))};t.assign=function(t){return{type:"xstate.assign",assignment:t}},t.createMachine=function(t,n){void 0===n&&(n={});var e={config:t,_options:n,initialState:{value:t.initial,actions:r(t.states[t.initial].entry).map((function(t){return i(t,n.actions)})),context:t.context,matches:o(t.initial)},transition:function(n,c){var s,f,p="string"==typeof n?{value:n,context:t.context}:n,l=p.value,v=p.context,d=a(c),y=t.states[l];if(y.on){var g=r(y.on[d.type]),x=function(n){if(void 0===n)return{value:u(l,v)};var r="string"==typeof n?{target:n}:n,a=r.target,c=void 0===a?l:a,s=r.actions,f=void 0===s?[]:s,p=r.cond,g=v;if((void 0===p?function(){return!0}:p)(v,d)){var x=t.states[c],S=!1,m=[].concat(y.exit,f,x.entry).filter((function(t){return t})).map((function(t){return i(t,e._options.actions)})).filter((function(t){if("xstate.assign"===t.type){S=!0;var n=Object.assign({},g);return"function"==typeof t.assignment?n=t.assignment(g,d):Object.keys(t.assignment).forEach((function(e){n[e]="function"==typeof t.assignment[e]?t.assignment[e](g,d):t.assignment[e]})),g=n,!1}return!0}));return{value:{value:c,context:g,actions:m,changed:c!==l||m.length>0||S,matches:o(c)}}}};try{for(var S=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}(g),m=S.next();!m.done;m=S.next()){var h=x(m.value);if("object"==typeof h)return h.value}}catch(t){s={error:t}}finally{try{m&&!m.done&&(f=S.return)&&f.call(S)}finally{if(s)throw s.error}}}return u(l,v)}};return e},t.interpret=function(n){var r=n.initialState,i=t.InterpreterStatus.NotStarted,o=new Set,u={_machine:n,send:function(e){i===t.InterpreterStatus.Running&&(r=n.transition(r,e),c(r,a(e)),o.forEach((function(t){return t(r)})))},subscribe:function(t){return o.add(t),t(r),{unsubscribe:function(){return o.delete(t)}}},start:function(){return i=t.InterpreterStatus.Running,c(r,e),u},stop:function(){return i=t.InterpreterStatus.Stopped,o.clear(),u},get state(){return r},get status(){return i}};return u},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).XStateFSM={});
